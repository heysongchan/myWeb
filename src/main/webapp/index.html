<!DOCTYPE html>
<html>

<head>
    <title>ssm</title>
    <meta charset="UTF-8" />
</head>

<body>

    <script>
        var ProgressBar = (function () {
            var ret = {};
            var isInit = false;
            var progressBox = document.createElement("div");
            progressBox.style.cssText = "display:none; position: absolute; width: 302px; height: 40px; top: 49%; left: 45%; background-color: white; border-radius: 4px; z-index: 1000; border: 1px rgb(0, 174, 255) solid;";

            var progressText = document.createElement("div");
            progressText.style.cssText = "width: 300px; height: 20px; padding-left: 10px;";

            var progress = document.createElement("div");
            progress.style.cssText = "width: 300px; border: 1px rgb(65, 175, 238) solid; background-color: rgb(218, 242, 250); height: 20px; margin-bottom: 20px; overflow: hidden; border-radius: 4px; -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, .1); box-shadow: inset 0 1px 2px rgba(0, 0, 0, .1);";
            //progress.className = "progress progress-striped";

            var progressBar = document.createElement("div");
            progressBar.style.cssText = "float: left; width: 0; height: 100%; font-size: 12px; line-height: 20px; color: #fff; text-align: center; background-color: #337ab7; -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, .15); box-shadow: inset 0 -1px 0 rgba(0, 0, 0, .15); -webkit-transition: width .6s ease; -o-transition: width .6s ease; transition: width .6s ease;"
            //progressBar.className = "progress-bar progress-bar-info";

            progress.appendChild(progressBar);
            progressBox.appendChild(progressText);
            progressBox.appendChild(progress);
            document.body.appendChild(progressBox);

            ret['setMsg'] = function (msg) {
                progressText.innerText = msg;
            }
            ret['show'] = function () {
                progressBox.style.display = "block";
            };
            ret['hide'] = function () {
                progressBox.style.display = "none";
            };
            ret['progress'] = function (num) {
                progressBar.style.width = num + "%";
                if (num >= 100 || num < 0) {
                    ret.hide();
                };
            };
            return ret;
        })();

        // var location = document.location;
        // var protocol = location.protocol;
        // var hostname = location.hostname;
        // var port = location.port;
        // var path = location.pathname;
        // var context = path; context = context.substr(1); var i = context.indexOf('/'); context = context.substr(0, i);
        var xhr = new XMLHttpRequest();
        var url = 'http://localhost:8080/a/dodo';
        xhr.open('get', url);
        xhr.onload = function () {
            if (xhr.readyState == 4) {
                if (xhr.status == 200) {
                    console.log(xhr.responseText);
                }
            }
        };
        xhr.send();

        var xhr1 = new XMLHttpRequest();
        xhr1.open('get', url);
        xhr1.onload = function () {
            if (xhr1.readyState == 4) {
                if (xhr1.status == 200) {
                    console.log(xhr1.responseText);
                }
            }
        };
        xhr1.send();
    </script>
</body>

</html>